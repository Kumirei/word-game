<div *ngIf="isInit" class="board">
    <div class="flex">
        <select [(ngModel)]="size[0]">
            <option *ngFor="let s of sizes" [ngValue]="s">{{ s }}</option>
        </select>
        <select [(ngModel)]="size[1]">
            <option *ngFor="let s of sizes" [ngValue]="s">{{ s }}</option>
        </select>
    </div>
    <p class="hint">
        {{ solution.length }} word{{ solution.length === 1 ? '' : 's' }} =
        cookie
    </p>

    <div>
        <div *ngFor="let row of state; let y = index" class="row">
            <div
                #cell
                *ngFor="let cell of row; let x = index"
                class="cell"
                [attr.data-x]="x"
                [attr.data-y]="y"
                [attr.data-state]="cell.state"
                [style.backgroundColor]="colors[cell.state - 1]"
            >
                {{ cell.char }}
            </div>
        </div>
    </div>
    <div *ngIf="solved" class="solution">
        <span>Solution: {{ solution.join(', ').toUpperCase() }}</span>
    </div>
    <div class="guesses flex column reverse">
        <span
            *ngFor="
                let guess of guesses | slice: 0 : -1;
                let i = index;
                trackBy: trackByIndex
            "
            [attr.data-state]="i"
            [style.backgroundColor]="colors[i]"
            class="guess"
            >{{ guess }}</span
        >
        <input
            #wordInput
            class="guess"
            [class.active]="!solved"
            [disabled]="solved"
            [(ngModel)]="guesses[guesses.length - 1]"
            (ngModelChange)="onInput($event)"
            (keydown.enter)="onEnter($event)"
            (keydown.backspace)="onBackspace($event)"
            [style.backgroundColor]="
                solved ? colors[guesses.length - 1] : '#FFF'
            "
        />
    </div>
</div>
